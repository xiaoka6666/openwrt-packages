import{u as W,f as e,ah as Z,i as t,ai as I,aj as J,F as x,ak as K,al as Q,am as u,an as U,ao as Y,g as C,ap as O,aq as B,ar as V,P as ee,t as v,A as L,C as te,r as ae,b as re,y as le,R as se,$ as k,D as ne,a2 as oe,a3 as ie,B as P,a5 as ce,a1 as j,a6 as de,a9 as ue,aa as ge,a0 as A,ae as he,ag as ve,l as fe}from"./index-B45ObzUn.js";import{c as me,g as be,a as pe,e as $e,f as G,r as _e}from"./index-DJM-jlDz.js";var Se=v('<div class="flex flex-col gap-4"><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full">'),M=v("<option>");const xe=i=>{const[r]=W();return e(ee,{ref:o=>{var c;return(c=i.ref)==null?void 0:c.call(i,o)},get icon(){return e(Z,{size:24})},get title(){return r("logsSettings")},get children(){var o=Se(),c=o.firstChild,d=c.firstChild,$=c.nextSibling,m=$.firstChild,w=$.nextSibling,b=w.firstChild;return t(c,e(I,{withDivider:!0,get children(){return r("tableSize")}}),d),d.addEventListener("change",a=>J(a.target.value)),t(d,e(x,{get each(){return Object.values(K)},children:a=>(()=>{var s=M();return s.value=a,t(s,()=>r(a)),s})()})),t($,e(I,{withDivider:!0,get children(){return r("logLevel")}}),m),m.addEventListener("change",a=>Q(a.target.value)),t(m,e(x,{get each(){return[u.Info,u.Error,u.Warning,u.Debug,u.Silent]},children:a=>(()=>{var s=M();return s.value=a,t(s,()=>r(a)),s})()})),t(w,e(I,{withDivider:!0,get children(){return r("logMaxRows")}}),b),b.addEventListener("change",a=>U(parseInt(a.target.value))),t(b,e(x,{each:Y,children:a=>(()=>{var s=M();return s.value=a,t(s,a),s})()})),C(()=>d.value=O()),C(()=>m.value=B()),C(()=>b.value=V()),o}})};let q=1;const[Ce,we]=L([]),ye=te("logs",{level:B()}),[H,Le]=L(!1);ae(()=>{const i=ye();!i||H()||(we(r=>[{...i,seq:q},...r].slice(0,V())),q++)});const Fe=()=>({logs:Ce,paused:H,setPaused:Le});var Ie=v("<span>"),ke=v('<div class="flex h-full flex-col gap-2"><div class="join w-full"><input type=search class="input input-sm join-item input-primary flex-1 flex-shrink-0"></div><div class="overflow-x-auto whitespace-nowrap rounded-md bg-base-300"><table><thead class="sticky top-0 z-10"></thead><tbody>'),Me=v("<tr>"),Re=v('<th class=bg-base-200><div class="flex items-center"><div>'),Ee=v('<tr class="hover:!bg-primary hover:text-primary-content">'),De=v("<td class=py-2>");const N=(i,r,o,c)=>{const d=_e(i.getValue(r),o);return c({itemRank:d}),d.passed},Pe=()=>{const i=re();if(!le())return i("/setup",{replace:!0}),null;let r;const[o]=W(),[c,d]=L(""),{logs:$,paused:m,setPaused:w}=Fe(),[b,a]=se(L([]),{name:"logsTableSorting",storage:localStorage}),s=[{header:o("sequence"),accessorFn:n=>n.seq},{header:o("type"),accessorFn:n=>n.type,cell:({row:n})=>{const p=n.original.type;let g="";switch(p){case u.Error:g="text-error";break;case u.Warning:g="text-warning";break;case u.Info:g="text-info";break;case u.Debug:g="text-success";break}return(()=>{var _=Ie();return k(_,g),t(_,()=>`[${n.original.type}]`),_})()}},{header:o("payload"),accessorFn:n=>n.payload}],R=me({filterFns:{fuzzy:N},state:{get globalFilter(){return c()},get sorting(){return b()}},get data(){return $()},sortDescFirst:!0,columns:s,onGlobalFilterChange:d,onSortingChange:a,globalFilterFn:N,getFilteredRowModel:be(),getSortedRowModel:pe(),getCoreRowModel:$e()});return(()=>{var n=ke(),p=n.firstChild,g=p.firstChild,_=p.nextSibling,E=_.firstChild,D=E.firstChild,X=D.nextSibling;return g.$$input=l=>d(l.target.value),t(p,e(P,{class:"btn-primary join-item btn-sm",onClick:()=>w(l=>!l),get icon(){return ne(()=>!!m())()?e(oe,{}):e(ie,{})}}),null),t(p,e(P,{class:"btn-primary join-item btn-sm",onClick:()=>r==null?void 0:r.showModal(),get icon(){return e(ce,{})}}),null),t(D,e(j,{get each(){return R.getHeaderGroups()},children:l=>{const f=l();return(()=>{var h=Me();return t(h,e(j,{get each(){return f.headers},children:y=>{const S=y();return(()=>{var z=Re(),T=z.firstChild,F=T.firstChild;return de(F,"click",S.column.getToggleSortingHandler(),!0),t(F,()=>G(S.column.columnDef.header,S.getContext())),t(T,()=>({asc:e(ue,{}),desc:e(ge,{})})[S.column.getIsSorted()]??null,null),C(()=>k(F,A(S.column.getCanSort()&&"cursor-pointer select-none","flex-1"))),z})()}})),h})()}})),t(X,e(x,{get each(){return R.getRowModel().rows},children:l=>(()=>{var f=Ee();return t(f,e(x,{get each(){return l.getVisibleCells()},children:h=>(()=>{var y=De();return t(y,()=>G(h.column.columnDef.cell,h.getContext())),y})()})),f})()})),t(n,e(xe,{ref:l=>r=l}),null),C(l=>{var f=o("search"),h=A(he(O()),"table relative rounded-none");return f!==l.e&&ve(g,"placeholder",l.e=f),h!==l.t&&k(E,l.t=h),l},{e:void 0,t:void 0}),n})()};fe(["input","click"]);export{Pe as default};
